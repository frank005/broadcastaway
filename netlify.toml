[build]
  command = "npm run build"
  publish = ".next"

[build.environment]
  NODE_VERSION = "18"
  NPM_FLAGS = "--legacy-peer-deps"

[dev]
  targetPort = 3000
  port = 8888

[[plugins]]
  package = "@netlify/plugin-nextjs"

# Configure which environment variables are passed to functions
# This helps avoid the 4KB Lambda environment variable limit
[functions]
  # Only pass essential variables to functions
  # Next.js API routes can access all env vars, but Netlify functions have limits
  included_files = []

# Next.js handles all routing - no need for redirects
# The plugin automatically handles Next.js routing
